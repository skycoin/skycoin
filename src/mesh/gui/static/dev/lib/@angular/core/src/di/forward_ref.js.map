{"version":3,"file":"forward_ref.js","sourceRoot":"","sources":["../../../../../modules/@angular/core/src/di/forward_ref.ts"],"names":[],"mappings":";AAIE,qBAA0C,uBAAuB,CAAC,CAAA;AAWpE;;;;;;;;;;GAUG;AACH,oBAA2B,YAA0B;IAC7C,YAAa,CAAC,eAAe,GAAG,UAAU,CAAC;IAC3C,YAAa,CAAC,QAAQ,GAAG,cAAa,MAAM,CAAC,gBAAS,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACxE,MAAM,CAAa,YAAa,CAAC;AACnC,CAAC;AAJe,kBAAU,aAIzB,CAAA;AAED;;;;;;;;;;;;;;GAcG;AACH,2BAAkC,IAAS;IACzC,EAAE,CAAC,CAAC,iBAAU,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC;QAC1D,IAAI,CAAC,eAAe,KAAK,UAAU,CAAC,CAAC,CAAC;QACxC,MAAM,CAAgB,IAAK,EAAE,CAAC;IAChC,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;AACH,CAAC;AAPe,yBAAiB,oBAOhC,CAAA","sourcesContent":["interface DecoratorInvocation {\n    type: Function;\n    args?: any[];\n  }\n  import {Type, stringify, isFunction} from '../../src/facade/lang';\n\n/**\n * An interface that a function passed into {@link forwardRef} has to implement.\n *\n * ### Example\n *\n * {@example core/di/ts/forward_ref/forward_ref.ts region='forward_ref_fn'}\n */\nexport interface ForwardRefFn { (): any; }\n\n/**\n * Allows to refer to references which are not yet defined.\n *\n * For instance, `forwardRef` is used when the `token` which we need to refer to for the purposes of\n * DI is declared,\n * but not yet defined. It is also used when the `token` which we use when creating a query is not\n * yet defined.\n *\n * ### Example\n * {@example core/di/ts/forward_ref/forward_ref.ts region='forward_ref'}\n */\nexport function forwardRef(forwardRefFn: ForwardRefFn): Type {\n  (<any>forwardRefFn).__forward_ref__ = forwardRef;\n  (<any>forwardRefFn).toString = function() { return stringify(this()); };\n  return (<Type><any>forwardRefFn);\n}\n\n/**\n * Lazily retrieves the reference value from a forwardRef.\n *\n * Acts as the identity function when given a non-forward-ref value.\n *\n * ### Example ([live demo](http://plnkr.co/edit/GU72mJrk1fiodChcmiDR?p=preview))\n *\n * ```typescript\n * var ref = forwardRef(() => \"refValue\");\n * expect(resolveForwardRef(ref)).toEqual(\"refValue\");\n * expect(resolveForwardRef(\"regularValue\")).toEqual(\"regularValue\");\n * ```\n *\n * See: {@link forwardRef}\n */\nexport function resolveForwardRef(type: any): any {\n  if (isFunction(type) && type.hasOwnProperty('__forward_ref__') &&\n      type.__forward_ref__ === forwardRef) {\n    return (<ForwardRefFn>type)();\n  } else {\n    return type;\n  }\n}\n"]}