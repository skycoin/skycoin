{"version":3,"file":"downgrade_component_adapter.js","sourceRoot":"","sources":["../../../../../modules/@angular/upgrade/src/aot/downgrade_component_adapter.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ChangeDetectorRef, ComponentFactory, ComponentRef, EventEmitter, Injector, OnChanges, ReflectiveInjector, SimpleChange, SimpleChanges, Type} from '@angular/core';\n\nimport * as angular from '../angular_js';\n\nimport {ComponentInfo, PropertyBinding} from './component_info';\nimport {$SCOPE} from './constants';\n\nconst /** @type {?} */ INITIAL_VALUE = {\n  __UNINITIALIZED__: true\n};\n\nexport class DowngradeComponentAdapter {\n  component: any = null;\n  inputs: Attr;\n  inputChangeCount: number = 0;\n  inputChanges: SimpleChanges = null;\n  componentRef: ComponentRef<any> = null;\n  changeDetector: ChangeDetectorRef = null;\n  componentScope: angular.IScope;\n  childNodes: Node[];\n  contentInsertionPoint: Node = null;\n/**\n * @param {?} id\n * @param {?} info\n * @param {?} element\n * @param {?} attrs\n * @param {?} scope\n * @param {?} parentInjector\n * @param {?} parse\n * @param {?} componentFactory\n */\nconstructor(\nprivate id: string,\nprivate info: ComponentInfo,\nprivate element: angular.IAugmentedJQuery,\nprivate attrs: angular.IAttributes,\nprivate scope: angular.IScope,\nprivate parentInjector: Injector,\nprivate parse: angular.IParseService,\nprivate componentFactory: ComponentFactory<any>) {\n    (<any>this.element[0]).id = id;\n    this.componentScope = scope.$new();\n    this.childNodes = <Node[]><any>element.contents();\n  }\n/**\n * @return {?}\n */\ncreateComponent() {\n    const /** @type {?} */ childInjector = ReflectiveInjector.resolveAndCreate(\n        [{provide: $SCOPE, useValue: this.componentScope}], this.parentInjector);\n    this.contentInsertionPoint = document.createComment('ng1 insertion point');\n\n    this.componentRef = this.componentFactory.create(\n        childInjector, [[this.contentInsertionPoint]], this.element[0]);\n    this.changeDetector = this.componentRef.changeDetectorRef;\n    this.component = this.componentRef.instance;\n  }\n/**\n * @return {?}\n */\nsetupInputs(): void {\n    const /** @type {?} */ attrs = this.attrs;\n    const /** @type {?} */ inputs = this.info.inputs || [];\n    for (let /** @type {?} */ i = 0; i < inputs.length; i++) {\n      const /** @type {?} */ input = new PropertyBinding(inputs[i]);\n      let /** @type {?} */ expr: any /** TODO #9100 */ = null;\n\n      if (attrs.hasOwnProperty(input.attr)) {\n        const /** @type {?} */ observeFn = ((prop: any /** TODO #9100 */) => {\n          let /** @type {?} */ prevValue = INITIAL_VALUE;\n          return (value: any /** TODO #9100 */) => {\n            if (this.inputChanges !== null) {\n              this.inputChangeCount++;\n              this.inputChanges[prop] =\n                  new Ng1Change(value, prevValue === INITIAL_VALUE ? value : prevValue);\n              prevValue = value;\n            }\n            this.component[prop] = value;\n          };\n        })(input.prop);\n        attrs.$observe(input.attr, observeFn);\n\n      } else if (attrs.hasOwnProperty(input.bindAttr)) {\n        expr = ( /** @type {?} */((attrs as any)) /** TODO #9100 */)[input.bindAttr];\n      } else if (attrs.hasOwnProperty(input.bracketAttr)) {\n        expr = ( /** @type {?} */((attrs as any)) /** TODO #9100 */)[input.bracketAttr];\n      } else if (attrs.hasOwnProperty(input.bindonAttr)) {\n        expr = ( /** @type {?} */((attrs as any)) /** TODO #9100 */)[input.bindonAttr];\n      } else if (attrs.hasOwnProperty(input.bracketParenAttr)) {\n        expr = ( /** @type {?} */((attrs as any)) /** TODO #9100 */)[input.bracketParenAttr];\n      }\n      if (expr != null) {\n        const /** @type {?} */ watchFn =\n            ((prop: any /** TODO #9100 */) =>\n                 (value: any /** TODO #9100 */, prevValue: any /** TODO #9100 */) => {\n                   if (this.inputChanges != null) {\n                     this.inputChangeCount++;\n                     this.inputChanges[prop] = new Ng1Change(prevValue, value);\n                   }\n                   this.component[prop] = value;\n                 })(input.prop);\n        this.componentScope.$watch(expr, watchFn);\n      }\n    }\n\n    const /** @type {?} */ prototype = this.info.component.prototype;\n    if (prototype && ( /** @type {?} */((<OnChanges>prototype))).ngOnChanges) {\n      // Detect: OnChanges interface\n      this.inputChanges = {};\n      this.componentScope.$watch(() => this.inputChangeCount, () => {\n        const /** @type {?} */ inputChanges = this.inputChanges;\n        this.inputChanges = {};\n        ( /** @type {?} */((<OnChanges>this.component))).ngOnChanges(inputChanges);\n      });\n    }\n    this.componentScope.$watch(() => this.changeDetector && this.changeDetector.detectChanges());\n  }\n/**\n * @return {?}\n */\nprojectContent() {\n    const /** @type {?} */ childNodes = this.childNodes;\n    const /** @type {?} */ parent = this.contentInsertionPoint.parentNode;\n    if (parent) {\n      for (let /** @type {?} */ i = 0, /** @type {?} */ ii = childNodes.length; i < ii; i++) {\n        parent.insertBefore(childNodes[i], this.contentInsertionPoint);\n      }\n    }\n  }\n/**\n * @return {?}\n */\nsetupOutputs() {\n    const /** @type {?} */ attrs = this.attrs;\n    const /** @type {?} */ outputs = this.info.outputs || [];\n    for (let /** @type {?} */ j = 0; j < outputs.length; j++) {\n      const /** @type {?} */ output = new PropertyBinding(outputs[j]);\n      let /** @type {?} */ expr: any /** TODO #9100 */ = null;\n      let /** @type {?} */ assignExpr = false;\n\n      const /** @type {?} */ bindonAttr =\n          output.bindonAttr ? output.bindonAttr.substring(0, output.bindonAttr.length - 6) : null;\n      const /** @type {?} */ bracketParenAttr = output.bracketParenAttr ?\n          `[(${output.bracketParenAttr.substring(2, output.bracketParenAttr.length - 8)})]` :\n          null;\n\n      if (attrs.hasOwnProperty(output.onAttr)) {\n        expr = ( /** @type {?} */((attrs as any)) /** TODO #9100 */)[output.onAttr];\n      } else if (attrs.hasOwnProperty(output.parenAttr)) {\n        expr = ( /** @type {?} */((attrs as any)) /** TODO #9100 */)[output.parenAttr];\n      } else if (attrs.hasOwnProperty(bindonAttr)) {\n        expr = ( /** @type {?} */((attrs as any)) /** TODO #9100 */)[bindonAttr];\n        assignExpr = true;\n      } else if (attrs.hasOwnProperty(bracketParenAttr)) {\n        expr = ( /** @type {?} */((attrs as any)) /** TODO #9100 */)[bracketParenAttr];\n        assignExpr = true;\n      }\n\n      if (expr != null && assignExpr != null) {\n        const /** @type {?} */ getter = this.parse(expr);\n        const /** @type {?} */ setter = getter.assign;\n        if (assignExpr && !setter) {\n          throw new Error(`Expression '${expr}' is not assignable!`);\n        }\n        const /** @type {?} */ emitter = /** @type {?} */(( this.component[output.prop] as EventEmitter<any>));\n        if (emitter) {\n          emitter.subscribe({\n            next: assignExpr ?\n                ((setter: any) => (v: any /** TODO #9100 */) => setter(this.scope, v))(setter) :\n                ((getter: any) => (v: any /** TODO #9100 */) =>\n                     getter(this.scope, {$event: v}))(getter)\n          });\n        } else {\n          throw new Error(\n              `Missing emitter '${output.prop}' on component '${this.info.component}'!`);\n        }\n      }\n    }\n  }\n/**\n * @return {?}\n */\nregisterCleanup() {\n    this.element.bind('$destroy', () => {\n      this.componentScope.$destroy();\n      this.componentRef.destroy();\n    });\n  }\n}\n\nfunction DowngradeComponentAdapter_tsickle_Closure_declarations() {\n /** @type {?} */\nDowngradeComponentAdapter.prototype.component;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.inputs;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.inputChangeCount;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.inputChanges;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.componentRef;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.changeDetector;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.componentScope;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.childNodes;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.contentInsertionPoint;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.id;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.info;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.element;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.attrs;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.scope;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.parentInjector;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.parse;\n /** @type {?} */\nDowngradeComponentAdapter.prototype.componentFactory;\n}\n\n\nclass Ng1Change implements SimpleChange {\n/**\n * @param {?} previousValue\n * @param {?} currentValue\n */\nconstructor(public previousValue: any,\npublic currentValue: any) {}\n/**\n * @return {?}\n */\nisFirstChange(): boolean { return this.previousValue === this.currentValue; }\n}\n\nfunction Ng1Change_tsickle_Closure_declarations() {\n /** @type {?} */\nNg1Change.prototype.previousValue;\n /** @type {?} */\nNg1Change.prototype.currentValue;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}