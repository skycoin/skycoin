{"version":3,"file":"web_animations_driver.js","sourceRoot":"","sources":["../../../../../modules/@angular/platform-browser/src/dom/web_animations_driver.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {AnimationPlayer} from '@angular/core';\nimport {isPresent} from '../facade/lang';\nimport {AnimationKeyframe, AnimationStyles} from '../private_import_core';\n\nimport {AnimationDriver} from './animation_driver';\nimport {WebAnimationsPlayer} from './web_animations_player';\n\nexport class WebAnimationsDriver implements AnimationDriver {\n  animate(\n      element: any, startingStyles: AnimationStyles, keyframes: AnimationKeyframe[],\n      duration: number, delay: number, easing: string,\n      previousPlayers: AnimationPlayer[] = []): WebAnimationsPlayer {\n    let formattedSteps: {[key: string]: string | number}[] = [];\n    let startingStyleLookup: {[key: string]: string | number} = {};\n    if (isPresent(startingStyles) && startingStyles.styles.length > 0) {\n      startingStyleLookup = _populateStyles(startingStyles, {});\n      startingStyleLookup['offset'] = 0;\n      formattedSteps.push(startingStyleLookup);\n    }\n\n    keyframes.forEach((keyframe: AnimationKeyframe) => {\n      const data = _populateStyles(keyframe.styles, startingStyleLookup);\n      data['offset'] = keyframe.offset;\n      formattedSteps.push(data);\n    });\n\n    // this is a special case when only styles are applied as an\n    // animation. When this occurs we want to animate from start to\n    // end with the same values. Removing the offset and having only\n    // start/end values is suitable enough for the web-animations API\n    if (formattedSteps.length == 1) {\n      const start = formattedSteps[0];\n      start['offset'] = null;\n      formattedSteps = [start, start];\n    }\n\n    const playerOptions: {[key: string]: string | number} = {\n      'duration': duration,\n      'delay': delay,\n      'fill': 'both'  // we use `both` because it allows for styling at 0% to work with `delay`\n    };\n\n    // we check for this to avoid having a null|undefined value be present\n    // for the easing (which results in an error for certain browsers #9752)\n    if (easing) {\n      playerOptions['easing'] = easing;\n    }\n\n    // there may be a chance a NoOp player is returned depending\n    // on when the previous animation was cancelled\n    previousPlayers = previousPlayers.filter(filterWebAnimationPlayerFn);\n    return new WebAnimationsPlayer(\n        element, formattedSteps, playerOptions, <WebAnimationsPlayer[]>previousPlayers);\n  }\n}\n\nfunction _populateStyles(styles: AnimationStyles, defaultStyles: {[key: string]: string | number}):\n    {[key: string]: string | number} {\n  const data: {[key: string]: string | number} = {};\n  styles.styles.forEach(\n      (entry) => { Object.keys(entry).forEach(prop => { data[prop] = entry[prop]; }); });\n  Object.keys(defaultStyles).forEach(prop => {\n    if (!isPresent(data[prop])) {\n      data[prop] = defaultStyles[prop];\n    }\n  });\n  return data;\n}\n\nfunction filterWebAnimationPlayerFn(player: AnimationPlayer) {\n  return player instanceof WebAnimationsPlayer;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}