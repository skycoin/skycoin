{"version":3,"sources":["app/angular2/zone.js/lib/browser/browser.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;;;;;QAYG,GAAG,EACH,KAAK,EACL,eAAe,EACf,OAAO,EASJ,CAAC,EACJ,IAAI,EAmBJ,QAAQ,EACR,QAAQ;IAQd,kBAAkB,MAAW;QAC3B,yBAAyB,MAAW;YAClC,IAAI,WAAW,GAAS,MAAM,CAAC,QAAQ,CAAC,CAAC;YACzC,MAAM,CAAC,WAAW,CAAC;QACrB,CAAC;QAED,sBAAsB,IAAU;YAC9B,IAAI,IAAI,GAAe,IAAI,CAAC,IAAI,CAAC;YACjC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,kBAAkB,EAAE;gBAC/C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;oBAChD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;wBAClB,IAAI,CAAC,MAAM,EAAE,CAAC;oBAChB,CAAC;gBACH,CAAC;YACH,CAAC,CAAC,CAAC;YACH,IAAI,UAAU,GAAS,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YAC7C,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAChB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;YAC/B,CAAC;YACD,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACzC,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,iCAAgC,CAAC;QAEjC,mBAAmB,IAAU;YAC3B,IAAI,IAAI,GAAe,IAAI,CAAC,IAAI,CAAC;YACjC,wFAAwF;YACxF,+EAA+E;YAC/E,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACnD,CAAC;QAED,IAAI,UAAU,GACV,mBAAW,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,MAAM,EAAE,MAAM,UAAS,IAAS,EAAE,IAAW;YACxF,IAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC;YAClC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;QAEP,IAAI,UAAU,GACV,mBAAW,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,MAAM,EAAE,MAAM,UAAS,IAAS,EAAE,IAAW;YACxF,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACnB,0EAA0E;gBAC1E,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACtC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,OAAO,GACP,EAAC,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAC,CAAC;gBAC/E,MAAM,CAAC,IAAI,CAAC,iBAAiB,CACzB,qBAAqB,EAAE,mBAAmB,EAAE,OAAO,EAAE,YAAY,EAAE,SAAS,CAAC,CAAC;YACpF,CAAC;QACH,CAAC,CAAC,CAAC;QAEP,IAAI,WAAW,GAAG,mBAAW,CACzB,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,OAAO,EACxC,CAAC,QAAkB,KAAK,UAAS,IAAS,EAAE,IAAW;YACrD,IAAI,IAAI,GAAS,eAAe,CAAC,IAAI,CAAC,CAAC;YACvC,EAAE,CAAC,CAAC,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;gBACzC,gDAAgD;gBAChD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;oBAC1B,MAAM,CAAC;gBACT,CAAC;gBACD,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAC7B,CAAC;YACD,4FAA4F;YAC5F,yBAAyB;QAC3B,CAAC,CAAC,CAAC;IACT,CAAC;;;;;;;;;;;;;;;;;;;;;;;YA5GK,GAAG,GAAG,KAAK,CAAC;YACZ,KAAK,GAAG,OAAO,CAAC;YAChB,eAAe,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;YACjD,OAAO,GAAG,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,IAAI,MAAM,CAAC;YAEnG,mBAAU,CAAC,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;YAC3C,mBAAU,CAAC,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;YAC5C,mBAAU,CAAC,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,WAAW,CAAC,CAAC;YAC7C,mBAAU,CAAC,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,gBAAgB,CAAC,CAAC;YAC3D,mBAAU,CAAC,OAAO,EAAE,YAAY,EAAE,WAAW,EAAE,gBAAgB,CAAC,CAAC;YACjE,mBAAU,CAAC,OAAO,EAAE,eAAe,EAAE,cAAc,EAAE,gBAAgB,CAAC,CAAC;YAEvE,GAAG,CAAC,CAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5C,IAAI,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;gBAC9B,mBAAW,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI;oBAChD,MAAM,CAAC,UAAS,CAAM,EAAE,IAAW;wBACjC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;oBACzD,CAAC,CAAC;gBACJ,CAAC,CAAC,CAAC;YACL,CAAC;YAED,+BAAgB,CAAC,OAAO,CAAC,CAAC;YAC1B,6CAAuB,CAAC,OAAO,CAAC,CAAC;YACjC,kBAAU,CAAC,kBAAkB,CAAC,CAAC;YAC/B,kBAAU,CAAC,wBAAwB,CAAC,CAAC;YACrC,kBAAU,CAAC,YAAY,CAAC,CAAC;YACzB,+BAAa,EAAE,CAAC;YAChB,uCAAoB,CAAC,OAAO,CAAC,CAAC;YAE9B,uCAAuC;YACvC,QAAQ,CAAC,OAAO,CAAC,CAAC;YAEZ,QAAQ,GAAG,kBAAU,CAAC,SAAS,CAAC,CAAC;YACjC,QAAQ,GAAG,kBAAU,CAAC,SAAS,CAAC,CAAC;YA6EvC,gBAAgB;YAChB,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,OAAO,CAAC,WAAW,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC7D,sBAAc,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,WAAW,EAAE,CAAC,oBAAoB,EAAE,eAAe,CAAC,CAAC,CAAC;YAC5F,CAAC","file":"browser.js","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport '../zone';\n\nimport {patchTimer} from '../common/timers';\nimport {patchClass, patchMethod, patchPrototype, zoneSymbol} from '../common/utils';\n\nimport {propertyPatch} from './define-property';\nimport {eventTargetPatch} from './event-target';\nimport {propertyDescriptorPatch} from './property-descriptor';\nimport {registerElementPatch} from './register-element';\n\nconst set = 'set';\nconst clear = 'clear';\nconst blockingMethods = ['alert', 'prompt', 'confirm'];\nconst _global = typeof window === 'object' && window || typeof self === 'object' && self || global;\n\npatchTimer(_global, set, clear, 'Timeout');\npatchTimer(_global, set, clear, 'Interval');\npatchTimer(_global, set, clear, 'Immediate');\npatchTimer(_global, 'request', 'cancel', 'AnimationFrame');\npatchTimer(_global, 'mozRequest', 'mozCancel', 'AnimationFrame');\npatchTimer(_global, 'webkitRequest', 'webkitCancel', 'AnimationFrame');\n\nfor (var i = 0; i < blockingMethods.length; i++) {\n  var name = blockingMethods[i];\n  patchMethod(_global, name, (delegate, symbol, name) => {\n    return function(s: any, args: any[]) {\n      return Zone.current.run(delegate, _global, args, name);\n    };\n  });\n}\n\neventTargetPatch(_global);\npropertyDescriptorPatch(_global);\npatchClass('MutationObserver');\npatchClass('WebKitMutationObserver');\npatchClass('FileReader');\npropertyPatch();\nregisterElementPatch(_global);\n\n// Treat XMLHTTPRequest as a macrotask.\npatchXHR(_global);\n\nconst XHR_TASK = zoneSymbol('xhrTask');\nconst XHR_SYNC = zoneSymbol('xhrSync');\n\ninterface XHROptions extends TaskData {\n  target: any;\n  args: any[];\n  aborted: boolean;\n}\n\nfunction patchXHR(window: any) {\n  function findPendingTask(target: any) {\n    var pendingTask: Task = target[XHR_TASK];\n    return pendingTask;\n  }\n\n  function scheduleTask(task: Task) {\n    var data = <XHROptions>task.data;\n    data.target.addEventListener('readystatechange', () => {\n      if (data.target.readyState === data.target.DONE) {\n        if (!data.aborted) {\n          task.invoke();\n        }\n      }\n    });\n    var storedTask: Task = data.target[XHR_TASK];\n    if (!storedTask) {\n      data.target[XHR_TASK] = task;\n    }\n    sendNative.apply(data.target, data.args);\n    return task;\n  }\n\n  function placeholderCallback() {}\n\n  function clearTask(task: Task) {\n    var data = <XHROptions>task.data;\n    // Note - ideally, we would call data.target.removeEventListener here, but it's too late\n    // to prevent it from firing. So instead, we store info for the event listener.\n    data.aborted = true;\n    return abortNative.apply(data.target, data.args);\n  }\n\n  var openNative =\n      patchMethod(window.XMLHttpRequest.prototype, 'open', () => function(self: any, args: any[]) {\n        self[XHR_SYNC] = args[2] == false;\n        return openNative.apply(self, args);\n      });\n\n  var sendNative =\n      patchMethod(window.XMLHttpRequest.prototype, 'send', () => function(self: any, args: any[]) {\n        var zone = Zone.current;\n        if (self[XHR_SYNC]) {\n          // if the XHR is sync there is no task to schedule, just execute the code.\n          return sendNative.apply(self, args);\n        } else {\n          var options: XHROptions =\n              {target: self, isPeriodic: false, delay: null, args: args, aborted: false};\n          return zone.scheduleMacroTask(\n              'XMLHttpRequest.send', placeholderCallback, options, scheduleTask, clearTask);\n        }\n      });\n\n  var abortNative = patchMethod(\n      window.XMLHttpRequest.prototype, 'abort',\n      (delegate: Function) => function(self: any, args: any[]) {\n        var task: Task = findPendingTask(self);\n        if (task && typeof task.type == 'string') {\n          // If the XHR has already completed, do nothing.\n          if (task.cancelFn == null) {\n            return;\n          }\n          task.zone.cancelTask(task);\n        }\n        // Otherwise, we are trying to abort an XHR which has not yet been sent, so there is no task\n        // to cancel. Do nothing.\n      });\n}\n\n/// GEO_LOCATION\nif (_global['navigator'] && _global['navigator'].geolocation) {\n  patchPrototype(_global['navigator'].geolocation, ['getCurrentPosition', 'watchPosition']);\n}\n"]}