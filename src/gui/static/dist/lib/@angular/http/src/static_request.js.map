{"version":3,"file":"static_request.js","sourceRoot":"","sources":["../../../../modules/@angular/http/src/static_request.ts"],"names":[],"mappings":";AAMA,wBAAsB,WAAW,CAAC,CAAA;AAClC,2BAAkC,cAAc,CAAC,CAAA;AACjD,qBAAuC,oBAAoB,CAAC,CAAA;AAE5D,sDAAsD;AACtD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAoCG;AACH;IAaE,iBAAY,cAA2B;QACrC,mCAAmC;QACnC,IAAI,GAAG,GAAG,cAAc,CAAC,GAAG,CAAC;QAC7B,IAAI,CAAC,GAAG,GAAG,cAAc,CAAC,GAAG,CAAC;QAC9B,EAAE,CAAC,CAAC,gBAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACrC,IAAI,MAAM,GAAG,cAAc,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;YAC9C,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACtB,IAAI,MAAM,GAAG,GAAG,CAAC;gBACjB,EAAE,CAAC,CAAC,oBAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1C,MAAM,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC;gBAC7D,CAAC;gBACD,wDAAwD;gBACxD,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,MAAM,GAAG,MAAM,CAAC;YACnC,CAAC;QACH,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC,IAAI,CAAC;QACjC,IAAI,CAAC,MAAM,GAAG,gCAAmB,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACzD,uCAAuC;QACvC,8CAA8C;QAC9C,uCAAuC;QACvC,IAAI,CAAC,OAAO,GAAG,IAAI,iBAAO,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;IACrD,CAAC;IAGD;;;;OAIG;IACH,sBAAI,GAAJ,cAAiB,MAAM,CAAC,gBAAS,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;IAC/E,cAAC;AAAD,CAAC,AA3CD,IA2CC;AA3CY,eAAO,UA2CnB,CAAA","sourcesContent":["interface DecoratorInvocation {\n    type: Function;\n    args?: any[];\n  }\n  import {RequestMethod} from './enums';\nimport {RequestArgs} from './interfaces';\nimport {Headers} from './headers';\nimport {normalizeMethodName} from './http_utils';\nimport {isPresent, StringWrapper} from '../src/facade/lang';\n\n// TODO(jeffbcross): properly implement body accessors\n/**\n * Creates `Request` instances from provided values.\n *\n * The Request's interface is inspired by the Request constructor defined in the [Fetch\n * Spec](https://fetch.spec.whatwg.org/#request-class),\n * but is considered a static value whose body can be accessed many times. There are other\n * differences in the implementation, but this is the most significant.\n *\n * `Request` instances are typically created by higher-level classes, like {@link Http} and\n * {@link Jsonp}, but it may occasionally be useful to explicitly create `Request` instances.\n * One such example is when creating services that wrap higher-level services, like {@link Http},\n * where it may be useful to generate a `Request` with arbitrary headers and search params.\n *\n * ```typescript\n * import {Injectable, Injector} from '@angular/core';\n * import {HTTP_PROVIDERS, Http, Request, RequestMethod} from '@angular/http';\n *\n * @Injectable()\n * class AutoAuthenticator {\n *   constructor(public http:Http) {}\n *   request(url:string) {\n *     return this.http.request(new Request({\n *       method: RequestMethod.Get,\n *       url: url,\n *       search: 'password=123'\n *     }));\n *   }\n * }\n *\n * var injector = Injector.resolveAndCreate([HTTP_PROVIDERS, AutoAuthenticator]);\n * var authenticator = injector.get(AutoAuthenticator);\n * authenticator.request('people.json').subscribe(res => {\n *   //URL should have included '?password=123'\n *   console.log('people', res.json());\n * });\n * ```\n */\nexport class Request {\n  /**\n   * Http method with which to perform the request.\n   */\n  method: RequestMethod;\n  /**\n   * {@link Headers} instance\n   */\n  headers: Headers;\n  /** Url of the remote resource */\n  url: string;\n  // TODO: support URLSearchParams | FormData | Blob | ArrayBuffer\n  private _body: string;\n  constructor(requestOptions: RequestArgs) {\n    // TODO: assert that url is present\n    let url = requestOptions.url;\n    this.url = requestOptions.url;\n    if (isPresent(requestOptions.search)) {\n      let search = requestOptions.search.toString();\n      if (search.length > 0) {\n        let prefix = '?';\n        if (StringWrapper.contains(this.url, '?')) {\n          prefix = (this.url[this.url.length - 1] == '&') ? '' : '&';\n        }\n        // TODO: just delete search-query-looking string in url?\n        this.url = url + prefix + search;\n      }\n    }\n    this._body = requestOptions.body;\n    this.method = normalizeMethodName(requestOptions.method);\n    // TODO(jeffbcross): implement behavior\n    // Defaults to 'omit', consistent with browser\n    // TODO(jeffbcross): implement behavior\n    this.headers = new Headers(requestOptions.headers);\n  }\n\n\n  /**\n   * Returns the request's body as string, assuming that body exists. If body is undefined, return\n   * empty\n   * string.\n   */\n  text(): String { return isPresent(this._body) ? this._body.toString() : ''; }\n}\n"]}