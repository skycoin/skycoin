{"version":3,"file":"template_ast.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/template_ast.ts"],"names":[],"mappings":"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","sourcesContent":["interface DecoratorInvocation {\n    type: Function;\n    args?: any[];\n  }\n  import {AST} from './expression_parser/ast';\nimport {isPresent} from '../src/facade/lang';\nimport {\n  CompileDirectiveMetadata,\n  CompileTokenMetadata,\n  CompileProviderMetadata,\n} from './compile_metadata';\nimport {ParseSourceSpan} from './parse_util';\nimport {SecurityContext} from '../core_private';\n\n/**\n * An Abstract Syntax Tree node representing part of a parsed Angular template.\n */\nexport interface TemplateAst {\n  /**\n   * The source span from which this node was parsed.\n   */\n  sourceSpan: ParseSourceSpan;\n\n  /**\n   * Visit this node and possibly transform it.\n   */\n  visit(visitor: TemplateAstVisitor, context: any): any;\n}\n\n/**\n * A segment of text within the template.\n */\nexport class TextAst implements TemplateAst {\n  constructor(public value: string, public ngContentIndex: number,\n              public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any { return visitor.visitText(this, context); }\n}\n\n/**\n * A bound expression within the text of a template.\n */\nexport class BoundTextAst implements TemplateAst {\n  constructor(public value: AST, public ngContentIndex: number,\n              public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitBoundText(this, context);\n  }\n}\n\n/**\n * A plain attribute on an element.\n */\nexport class AttrAst implements TemplateAst {\n  constructor(public name: string, public value: string, public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any { return visitor.visitAttr(this, context); }\n}\n\n/**\n * A binding for an element property (e.g. `[property]=\"expression\"`).\n */\nexport class BoundElementPropertyAst implements TemplateAst {\n  constructor(\n      public name: string, public type: PropertyBindingType,\n      public securityContext: SecurityContext, public value: AST, public unit: string,\n      public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitElementProperty(this, context);\n  }\n}\n\n/**\n * A binding for an element event (e.g. `(event)=\"handler()\"`).\n */\nexport class BoundEventAst implements TemplateAst {\n  constructor(public name: string, public target: string, public handler: AST,\n              public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitEvent(this, context);\n  }\n  get fullName() {\n    if (isPresent(this.target)) {\n      return `${this.target}:${this.name}`;\n    } else {\n      return this.name;\n    }\n  }\n}\n\n/**\n * A reference declaration on an element (e.g. `let someName=\"expression\"`).\n */\nexport class ReferenceAst implements TemplateAst {\n  constructor(public name: string, public value: CompileTokenMetadata,\n              public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitReference(this, context);\n  }\n}\n\n/**\n * A variable declaration on a <template> (e.g. `var-someName=\"someLocalName\"`).\n */\nexport class VariableAst implements TemplateAst {\n  constructor(public name: string, public value: string, public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitVariable(this, context);\n  }\n}\n\n/**\n * An element declaration in a template.\n */\nexport class ElementAst implements TemplateAst {\n  constructor(public name: string, public attrs: AttrAst[],\n              public inputs: BoundElementPropertyAst[], public outputs: BoundEventAst[],\n              public references: ReferenceAst[], public directives: DirectiveAst[],\n              public providers: ProviderAst[], public hasViewContainer: boolean,\n              public children: TemplateAst[], public ngContentIndex: number,\n              public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitElement(this, context);\n  }\n}\n\n/**\n * A `<template>` element included in an Angular template.\n */\nexport class EmbeddedTemplateAst implements TemplateAst {\n  constructor(public attrs: AttrAst[], public outputs: BoundEventAst[],\n              public references: ReferenceAst[], public variables: VariableAst[],\n              public directives: DirectiveAst[], public providers: ProviderAst[],\n              public hasViewContainer: boolean, public children: TemplateAst[],\n              public ngContentIndex: number, public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitEmbeddedTemplate(this, context);\n  }\n}\n\n/**\n * A directive property with a bound value (e.g. `*ngIf=\"condition\").\n */\nexport class BoundDirectivePropertyAst implements TemplateAst {\n  constructor(public directiveName: string, public templateName: string, public value: AST,\n              public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitDirectiveProperty(this, context);\n  }\n}\n\n/**\n * A directive declared on an element.\n */\nexport class DirectiveAst implements TemplateAst {\n  constructor(public directive: CompileDirectiveMetadata,\n              public inputs: BoundDirectivePropertyAst[],\n              public hostProperties: BoundElementPropertyAst[], public hostEvents: BoundEventAst[],\n              public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitDirective(this, context);\n  }\n}\n\n/**\n * A provider declared on an element\n */\nexport class ProviderAst implements TemplateAst {\n  constructor(public token: CompileTokenMetadata, public multiProvider: boolean,\n              public eager: boolean, public providers: CompileProviderMetadata[],\n              public providerType: ProviderAstType, public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    // No visit method in the visitor for now...\n    return null;\n  }\n}\n\nexport enum ProviderAstType {\n  PublicService,\n  PrivateService,\n  Component,\n  Directive,\n  Builtin\n}\n\n/**\n * Position where content is to be projected (instance of `<ng-content>` in a template).\n */\nexport class NgContentAst implements TemplateAst {\n  constructor(public index: number, public ngContentIndex: number,\n              public sourceSpan: ParseSourceSpan) {}\n  visit(visitor: TemplateAstVisitor, context: any): any {\n    return visitor.visitNgContent(this, context);\n  }\n}\n\n/**\n * Enumeration of types of property bindings.\n */\nexport enum PropertyBindingType {\n\n  /**\n   * A normal binding to a property (e.g. `[property]=\"expression\"`).\n   */\n  Property,\n\n  /**\n   * A binding to an element attribute (e.g. `[attr.name]=\"expression\"`).\n   */\n  Attribute,\n\n  /**\n   * A binding to a CSS class (e.g. `[class.name]=\"condition\"`).\n   */\n  Class,\n\n  /**\n   * A binding to a style rule (e.g. `[style.rule]=\"expression\"`).\n   */\n  Style\n}\n\n/**\n * A visitor for {@link TemplateAst} trees that will process each node.\n */\nexport interface TemplateAstVisitor {\n  visitNgContent(ast: NgContentAst, context: any): any;\n  visitEmbeddedTemplate(ast: EmbeddedTemplateAst, context: any): any;\n  visitElement(ast: ElementAst, context: any): any;\n  visitReference(ast: ReferenceAst, context: any): any;\n  visitVariable(ast: VariableAst, context: any): any;\n  visitEvent(ast: BoundEventAst, context: any): any;\n  visitElementProperty(ast: BoundElementPropertyAst, context: any): any;\n  visitAttr(ast: AttrAst, context: any): any;\n  visitBoundText(ast: BoundTextAst, context: any): any;\n  visitText(ast: TextAst, context: any): any;\n  visitDirective(ast: DirectiveAst, context: any): any;\n  visitDirectiveProperty(ast: BoundDirectivePropertyAst, context: any): any;\n}\n\n/**\n * Visit every node in a list of {@link TemplateAst}s with the given {@link TemplateAstVisitor}.\n */\nexport function templateVisitAll(visitor: TemplateAstVisitor, asts: TemplateAst[],\n                                 context: any = null): any[] {\n  var result = [];\n  asts.forEach(ast => {\n    var astResult = ast.visit(visitor, context);\n    if (isPresent(astResult)) {\n      result.push(astResult);\n    }\n  });\n  return result;\n}\n"]}