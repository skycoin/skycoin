{"version":3,"file":"provider.js","sourceRoot":"","sources":["../../../../../../modules/@angular/core/src/di/provider.ts"],"names":[],"mappings":"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","sourcesContent":["interface DecoratorInvocation {\n    type: Function;\n    args?: any[];\n  }\n  import {normalizeBool, Type, isType, isBlank, isFunction, stringify} from '../../src/facade/lang';\nimport {BaseException} from '../../src/facade/exceptions';\n\n/**\n * Describes how the {@link Injector} should instantiate a given token.\n *\n * See {@link provide}.\n *\n * ### Example ([live demo](http://plnkr.co/edit/GNAyj6K6PfYg2NBzgwZ5?p%3Dpreview&p=preview))\n *\n * ```javascript\n * var injector = Injector.resolveAndCreate([\n *   new Provider(\"message\", { useValue: 'Hello' })\n * ]);\n *\n * expect(injector.get(\"message\")).toEqual('Hello');\n * ```\n * @ts2dart_const\n */\nexport class Provider {\n  /**\n   * Token used when retrieving this provider. Usually, it is a type {@link Type}.\n   */\n  token;\n\n  /**\n   * Binds a DI token to an implementation class.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/RSTG86qgmoxCyj9SWPwY?p=preview))\n   *\n   * Because `useExisting` and `useClass` are often confused, the example contains\n   * both use cases for easy comparison.\n   *\n   * ```typescript\n   * class Vehicle {}\n   *\n   * class Car extends Vehicle {}\n   *\n   * var injectorClass = Injector.resolveAndCreate([\n   *   Car,\n   *   {provide: Vehicle,  useClass: Car }\n   * ]);\n   * var injectorAlias = Injector.resolveAndCreate([\n   *   Car,\n   *   {provide: Vehicle,  useExisting: Car }\n   * ]);\n   *\n   * expect(injectorClass.get(Vehicle)).not.toBe(injectorClass.get(Car));\n   * expect(injectorClass.get(Vehicle) instanceof Car).toBe(true);\n   *\n   * expect(injectorAlias.get(Vehicle)).toBe(injectorAlias.get(Car));\n   * expect(injectorAlias.get(Vehicle) instanceof Car).toBe(true);\n   * ```\n   */\n  useClass: Type;\n\n  /**\n   * Binds a DI token to a value.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/UFVsMVQIDe7l4waWziES?p=preview))\n   *\n   * ```javascript\n   * var injector = Injector.resolveAndCreate([\n   *   new Provider(\"message\", { useValue: 'Hello' })\n   * ]);\n   *\n   * expect(injector.get(\"message\")).toEqual('Hello');\n   * ```\n   */\n  useValue;\n\n  /**\n   * Binds a DI token to an existing token.\n   *\n   * {@link Injector} returns the same instance as if the provided token was used.\n   * This is in contrast to `useClass` where a separate instance of `useClass` is returned.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/QsatsOJJ6P8T2fMe9gr8?p=preview))\n   *\n   * Because `useExisting` and `useClass` are often confused the example contains\n   * both use cases for easy comparison.\n   *\n   * ```typescript\n   * class Vehicle {}\n   *\n   * class Car extends Vehicle {}\n   *\n   * var injectorAlias = Injector.resolveAndCreate([\n   *   Car,\n   *   {provide: Vehicle,  useExisting: Car }\n   * ]);\n   * var injectorClass = Injector.resolveAndCreate([\n   *   Car,\n   *   {provide: Vehicle,  useClass: Car }\n   * ]);\n   *\n   * expect(injectorAlias.get(Vehicle)).toBe(injectorAlias.get(Car));\n   * expect(injectorAlias.get(Vehicle) instanceof Car).toBe(true);\n   *\n   * expect(injectorClass.get(Vehicle)).not.toBe(injectorClass.get(Car));\n   * expect(injectorClass.get(Vehicle) instanceof Car).toBe(true);\n   * ```\n   */\n  useExisting;\n\n  /**\n   * Binds a DI token to a function which computes the value.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/Scoxy0pJNqKGAPZY1VVC?p=preview))\n   *\n   * ```typescript\n   * var injector = Injector.resolveAndCreate([\n   *   {provide: Number,  useFactory: () => { return 1+2; }},\n   *   new Provider(String, { useFactory: (value) => { return \"Value: \" + value; },\n   *                       deps: [Number] })\n   * ]);\n   *\n   * expect(injector.get(Number)).toEqual(3);\n   * expect(injector.get(String)).toEqual('Value: 3');\n   * ```\n   *\n   * Used in conjunction with dependencies.\n   */\n  useFactory: Function;\n\n  /**\n   * Specifies a set of dependencies\n   * (as `token`s) which should be injected into the factory function.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/Scoxy0pJNqKGAPZY1VVC?p=preview))\n   *\n   * ```typescript\n   * var injector = Injector.resolveAndCreate([\n   *   {provide: Number,  useFactory: () => { return 1+2; }},\n   *   new Provider(String, { useFactory: (value) => { return \"Value: \" + value; },\n   *                       deps: [Number] })\n   * ]);\n   *\n   * expect(injector.get(Number)).toEqual(3);\n   * expect(injector.get(String)).toEqual('Value: 3');\n   * ```\n   *\n   * Used in conjunction with `useFactory`.\n   */\n  dependencies: Object[];\n\n  /** @internal */\n  _multi: boolean;\n\n  constructor(token, {useClass, useValue, useExisting, useFactory, deps, multi}: {\n    useClass?: Type,\n    useValue?: any,\n    useExisting?: any,\n    useFactory?: Function,\n    deps?: Object[],\n    multi?: boolean\n  }) {\n    this.token = token;\n    this.useClass = useClass;\n    this.useValue = useValue;\n    this.useExisting = useExisting;\n    this.useFactory = useFactory;\n    this.dependencies = deps;\n    this._multi = multi;\n  }\n\n  // TODO: Provide a full working example after alpha38 is released.\n  /**\n   * Creates multiple providers matching the same token (a multi-provider).\n   *\n   * Multi-providers are used for creating pluggable service, where the system comes\n   * with some default providers, and the user can register additional providers.\n   * The combination of the default providers and the additional providers will be\n   * used to drive the behavior of the system.\n   *\n   * ### Example\n   *\n   * ```typescript\n   * var injector = Injector.resolveAndCreate([\n   *   new Provider(\"Strings\", { useValue: \"String1\", multi: true}),\n   *   new Provider(\"Strings\", { useValue: \"String2\", multi: true})\n   * ]);\n   *\n   * expect(injector.get(\"Strings\")).toEqual([\"String1\", \"String2\"]);\n   * ```\n   *\n   * Multi-providers and regular providers cannot be mixed. The following\n   * will throw an exception:\n   *\n   * ```typescript\n   * var injector = Injector.resolveAndCreate([\n   *   new Provider(\"Strings\", { useValue: \"String1\", multi: true }),\n   *   new Provider(\"Strings\", { useValue: \"String2\"})\n   * ]);\n   * ```\n   */\n  get multi(): boolean { return normalizeBool(this._multi); }\n}\n\n/**\n * See {@link Provider} instead.\n *\n * @deprecated\n * @ts2dart_const\n */\nexport class Binding extends Provider {\n  constructor(token, {toClass, toValue, toAlias, toFactory, deps, multi}: {\n    toClass?: Type,\n    toValue?: any,\n    toAlias?: any,\n    toFactory: Function, deps?: Object[], multi?: boolean\n  }) {\n    super(token, {\n      useClass: toClass,\n      useValue: toValue,\n      useExisting: toAlias,\n      useFactory: toFactory,\n      deps: deps,\n      multi: multi\n    });\n  }\n\n  /**\n   * @deprecated\n   */\n  get toClass() { return this.useClass; }\n\n  /**\n   * @deprecated\n   */\n  get toAlias() { return this.useExisting; }\n\n  /**\n   * @deprecated\n   */\n  get toFactory() { return this.useFactory; }\n\n  /**\n   * @deprecated\n   */\n  get toValue() { return this.useValue; }\n}\n\n/**\n * Creates a {@link Provider}.\n *\n * To construct a {@link Provider}, bind a `token` to either a class, a value, a factory function,\n * or\n * to an existing `token`.\n * See {@link ProviderBuilder} for more details.\n *\n * The `token` is most commonly a class or {@link OpaqueToken-class.html}.\n *\n * @deprecated\n */\nexport function bind(token): ProviderBuilder {\n  return new ProviderBuilder(token);\n}\n\n/**\n * Helper class for the {@link bind} function.\n */\nexport class ProviderBuilder {\n  constructor(public token) {}\n\n  /**\n   * Binds a DI token to a class.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/ZpBCSYqv6e2ud5KXLdxQ?p=preview))\n   *\n   * Because `toAlias` and `toClass` are often confused, the example contains\n   * both use cases for easy comparison.\n   *\n   * ```typescript\n   * class Vehicle {}\n   *\n   * class Car extends Vehicle {}\n   *\n   * var injectorClass = Injector.resolveAndCreate([\n   *   Car,\n   *   provide(Vehicle, {useClass: Car})\n   * ]);\n   * var injectorAlias = Injector.resolveAndCreate([\n   *   Car,\n   *   provide(Vehicle, {useExisting: Car})\n   * ]);\n   *\n   * expect(injectorClass.get(Vehicle)).not.toBe(injectorClass.get(Car));\n   * expect(injectorClass.get(Vehicle) instanceof Car).toBe(true);\n   *\n   * expect(injectorAlias.get(Vehicle)).toBe(injectorAlias.get(Car));\n   * expect(injectorAlias.get(Vehicle) instanceof Car).toBe(true);\n   * ```\n   */\n  toClass(type: Type): Provider {\n    if (!isType(type)) {\n      throw new BaseException(\n          `Trying to create a class provider but \"${stringify(type)}\" is not a class!`);\n    }\n    return new Provider(this.token, {useClass: type});\n  }\n\n  /**\n   * Binds a DI token to a value.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/G024PFHmDL0cJFgfZK8O?p=preview))\n   *\n   * ```typescript\n   * var injector = Injector.resolveAndCreate([\n   *   provide('message', {useValue: 'Hello'})\n   * ]);\n   *\n   * expect(injector.get('message')).toEqual('Hello');\n   * ```\n   */\n  toValue(value: any): Provider { return new Provider(this.token, {useValue: value}); }\n\n  /**\n   * Binds a DI token to an existing token.\n   *\n   * Angular will return the same instance as if the provided token was used. (This is\n   * in contrast to `useClass` where a separate instance of `useClass` will be returned.)\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/uBaoF2pN5cfc5AfZapNw?p=preview))\n   *\n   * Because `toAlias` and `toClass` are often confused, the example contains\n   * both use cases for easy comparison.\n   *\n   * ```typescript\n   * class Vehicle {}\n   *\n   * class Car extends Vehicle {}\n   *\n   * var injectorAlias = Injector.resolveAndCreate([\n   *   Car,\n   *   provide(Vehicle, {useExisting: Car})\n   * ]);\n   * var injectorClass = Injector.resolveAndCreate([\n   *   Car,\n   *   provide(Vehicle, {useClass: Car})\n   * ]);\n   *\n   * expect(injectorAlias.get(Vehicle)).toBe(injectorAlias.get(Car));\n   * expect(injectorAlias.get(Vehicle) instanceof Car).toBe(true);\n   *\n   * expect(injectorClass.get(Vehicle)).not.toBe(injectorClass.get(Car));\n   * expect(injectorClass.get(Vehicle) instanceof Car).toBe(true);\n   * ```\n   */\n  toAlias(aliasToken: /*Type*/ any): Provider {\n    if (isBlank(aliasToken)) {\n      throw new BaseException(`Can not alias ${stringify(this.token)} to a blank value!`);\n    }\n    return new Provider(this.token, {useExisting: aliasToken});\n  }\n\n  /**\n   * Binds a DI token to a function which computes the value.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/OejNIfTT3zb1iBxaIYOb?p=preview))\n   *\n   * ```typescript\n   * var injector = Injector.resolveAndCreate([\n   *   provide(Number, {useFactory: () => { return 1+2; }}),\n   *   provide(String, {useFactory: (v) => { return \"Value: \" + v; }, deps: [Number]})\n   * ]);\n   *\n   * expect(injector.get(Number)).toEqual(3);\n   * expect(injector.get(String)).toEqual('Value: 3');\n   * ```\n   */\n  toFactory(factory: Function, dependencies?: any[]): Provider {\n    if (!isFunction(factory)) {\n      throw new BaseException(\n          `Trying to create a factory provider but \"${stringify(factory)}\" is not a function!`);\n    }\n    return new Provider(this.token, {useFactory: factory, deps: dependencies});\n  }\n}\n\n/**\n * Creates a {@link Provider}.\n *\n * See {@link Provider} for more details.\n *\n * <!-- TODO: improve the docs -->\n */\nexport function provide(token, {useClass, useValue, useExisting, useFactory, deps, multi}: {\n  useClass?: Type,\n  useValue?: any,\n  useExisting?: any,\n  useFactory?: Function,\n  deps?: Object[],\n  multi?: boolean\n}): Provider {\n  return new Provider(token, {\n    useClass: useClass,\n    useValue: useValue,\n    useExisting: useExisting,\n    useFactory: useFactory,\n    deps: deps,\n    multi: multi\n  });\n}\n"]}