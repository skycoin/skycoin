{"version":3,"file":"ng_form.js","sourceRoot":"","sources":["../../../../../../../modules/@angular/common/src/forms/directives/ng_form.ts"],"names":[],"mappings":"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","sourcesContent":["interface DecoratorInvocation {\n    type: Function;\n    args?: any[];\n  }\n  import {Directive, forwardRef, Provider, Optional, Inject, Self} from '@angular/core';\nimport {\n  PromiseWrapper,\n  ObservableWrapper,\n  EventEmitter,\n  PromiseCompleter\n} from '../../../src/facade/async';\nimport {ListWrapper} from '../../../src/facade/collection';\nimport {isPresent} from '../../../src/facade/lang';\nimport {NgControl} from './ng_control';\nimport {Form} from './form_interface';\nimport {NgControlGroup} from './ng_control_group';\nimport {ControlContainer} from './control_container';\nimport {AbstractControl, ControlGroup, Control} from '../model';\nimport {setUpControl, setUpControlGroup, composeValidators, composeAsyncValidators} from './shared';\nimport {NG_VALIDATORS, NG_ASYNC_VALIDATORS} from '../validators';\n\nexport const formDirectiveProvider: any =\n    /*@ts2dart_const*/ {provide: ControlContainer, useExisting: forwardRef(() => NgForm)};\nexport class NgForm extends ControlContainer implements Form {\n  form: ControlGroup;\n  ngSubmit = new EventEmitter();\n\n  constructor( validators: any[], asyncValidators: any[]) {\n    super();\n    this.form = new ControlGroup({}, null, composeValidators(validators),\n                                 composeAsyncValidators(asyncValidators));\n  }\n\n  get formDirective(): Form { return this; }\n\n  get control(): ControlGroup { return this.form; }\n\n  get path(): string[] { return []; }\n\n  get controls(): {[key: string]: AbstractControl} { return this.form.controls; }\n\n  addControl(dir: NgControl): void {\n    PromiseWrapper.scheduleMicrotask(() => {\n      var container = this._findContainer(dir.path);\n      var ctrl = new Control();\n      setUpControl(ctrl, dir);\n      container.addControl(dir.name, ctrl);\n      ctrl.updateValueAndValidity({emitEvent: false});\n    });\n  }\n\n  getControl(dir: NgControl): Control { return <Control>this.form.find(dir.path); }\n\n  removeControl(dir: NgControl): void {\n    PromiseWrapper.scheduleMicrotask(() => {\n      var container = this._findContainer(dir.path);\n      if (isPresent(container)) {\n        container.removeControl(dir.name);\n        container.updateValueAndValidity({emitEvent: false});\n      }\n    });\n  }\n\n  addControlGroup(dir: NgControlGroup): void {\n    PromiseWrapper.scheduleMicrotask(() => {\n      var container = this._findContainer(dir.path);\n      var group = new ControlGroup({});\n      setUpControlGroup(group, dir);\n      container.addControl(dir.name, group);\n      group.updateValueAndValidity({emitEvent: false});\n    });\n  }\n\n  removeControlGroup(dir: NgControlGroup): void {\n    PromiseWrapper.scheduleMicrotask(() => {\n      var container = this._findContainer(dir.path);\n      if (isPresent(container)) {\n        container.removeControl(dir.name);\n        container.updateValueAndValidity({emitEvent: false});\n      }\n    });\n  }\n\n  getControlGroup(dir: NgControlGroup): ControlGroup {\n    return <ControlGroup>this.form.find(dir.path);\n  }\n\n  updateModel(dir: NgControl, value: any): void {\n    PromiseWrapper.scheduleMicrotask(() => {\n      var ctrl = <Control>this.form.find(dir.path);\n      ctrl.updateValue(value);\n    });\n  }\n\n  onSubmit(): boolean {\n    ObservableWrapper.callEmit(this.ngSubmit, null);\n    return false;\n  }\n\n  /** @internal */\n  _findContainer(path: string[]): ControlGroup {\n    path.pop();\n    return ListWrapper.isEmpty(path) ? this.form : <ControlGroup>this.form.find(path);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: 'form:not([ngNoForm]):not([ngFormModel]),ngForm,[ngForm]',\n  bindings: [formDirectiveProvider],\n  host: {\n    '(submit)': 'onSubmit()',\n  },\n  outputs: ['ngSubmit'],\n  exportAs: 'ngForm'\n}, ] },\n];\nstatic ctorParameters: {type: Function, decorators?: DecoratorInvocation[]}[] = [\n{type: undefined, decorators: [{ type: Optional }, { type: Self }, { type: Inject, args: [NG_VALIDATORS, ] }, ]},\n{type: undefined, decorators: [{ type: Optional }, { type: Self }, { type: Inject, args: [NG_ASYNC_VALIDATORS, ] }, ]},\n];\n}\n"]}